<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:activiti="http://activiti.org/bpmn" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:omgdc="http://www.omg.org/spec/DD/20100524/DC" xmlns:omgdi="http://www.omg.org/spec/DD/20100524/DI" typeLanguage="http://www.w3.org/2001/XMLSchema" expressionLanguage="http://www.w3.org/1999/XPath" targetNamespace="http://activiti.org/bpmn20" id="definitions">
  <process id="order" name="物料上传审核流程" isExecutable="true" activiti:candidateStarterGroups="advertiser">
    <documentation>订单状态审核包括以下步骤：
		 approve1:世巴初审
		 approve2:北广审核物料
		 payment:支付
		 schedule:排期
		每个步骤都会产生两个proccess变量，分别以Result和Comments结尾，描述该步骤审核的结果以及注释</documentation>
    <startEvent id="startevent1" name="Start">
      <documentation>开始物料上传审核流程，程序必须设置的process变量:
        1. _owner(UserDetail類型)
        2. 包括_theEmail，_theCompany,_timeout等变量</documentation>
    </startEvent>
    <sequenceFlow id="flow20" sourceRef="initializeTask" targetRef="mainSubprocess"></sequenceFlow>
    <userTask id="errortask" name="管理员介入" activiti:candidateGroups="ShibaOrderManager"></userTask>
    <userTask id="timeoutTask" name="订单超时" activiti:candidateGroups="ShibaOrderManager"></userTask>
    <sequenceFlow id="flow26" sourceRef="startevent1" targetRef="initializeTask"></sequenceFlow>
    <scriptTask id="initializeTask" name="初始化" scriptFormat="JavaScript" activiti:autoStoreVariables="false">
      <script>
			execution.setVariable("_theEmail", 'adbus@gscopetech.com');
            if (!execution.hasVariable("_theCompany")) {
			    execution.setVariable("_theCompany", 'Pantuo Tech co., Ltd');
			}
            if (!execution.hasVariable("_timeout")) {
			    execution.setVariable("_timeout", 'P7D');
		    }
		     execution.setVariable("_userPayed", false);
		     
		    execution.setVariable("approve1Result", false);
		    execution.setVariable("approve2Result", false);
		    execution.setVariable("paymentResult", false);
		    execution.setVariable("scheduleResult", false);
		    
		    execution.setVariable("shangboResult", false);
		    execution.setVariable("jianboResult", false);
		   
		</script>
    </scriptTask>
    <endEvent id="endevent1" name="End"></endEvent>
    <sequenceFlow id="flow50" sourceRef="mainSubprocess" targetRef="endevent1"></sequenceFlow>
    <sequenceFlow id="flow51" sourceRef="errortask" targetRef="endevent1"></sequenceFlow>
    <subProcess id="mainSubprocess" name="主要业务流程">
      <startEvent id="theStart"></startEvent>
      <userTask id="submitOrder" name="填写订单" activiti:candidateUsers="${_owner.username}" activiti:candidateGroups="ShibaSuppliesManager">
        <documentation>填写并上传物料单，包括物料基本信息</documentation>
      </userTask>
      <sequenceFlow id="flow1" sourceRef="theStart" targetRef="submitOrder"></sequenceFlow>
      <sequenceFlow id="flow27" sourceRef="submitOrder" targetRef="approvePaymentSubprocess"></sequenceFlow>
      <userTask id="shangboReport" name="上播报告" activiti:candidateGroups="ShibaOrderManager"></userTask>
      <sequenceFlow id="flow33" sourceRef="effectiveEmail" targetRef="shangboReport"></sequenceFlow>
      <endEvent id="theEnd"></endEvent>
      <userTask id="jianboReport" name="用户确认" activiti:candidateUsers="${_owner.username}"></userTask>
      <sequenceFlow id="flow34" sourceRef="shangboEmail" targetRef="jianboReport"></sequenceFlow>
      <userTask id="submitSchedule" name="提交排期表" activiti:candidateGroups="ShibaSuppliesManager"></userTask>
      <userTask id="inputSchedule" name="录入排期表" activiti:candidateGroups="BeiguangScheduleManager"></userTask>
      <sequenceFlow id="flow39" sourceRef="submitSchedule" targetRef="inputSchedule"></sequenceFlow>
      <sequenceFlow id="flow40" sourceRef="inputSchedule" targetRef="effectiveEmail"></sequenceFlow>
      <serviceTask id="effectiveEmail" name="发送订单生效邮件" activiti:delegateExpression="${messageBox}">
        <extensionElements>
          <activiti:field name="actionType">
            <activiti:string><![CDATA[effective]]></activiti:string>
          </activiti:field>
          <activiti:field name="sendMail">
            <activiti:string><![CDATA[YES]]></activiti:string>
          </activiti:field>
          <activiti:field name="sendSiteMsg">
            <activiti:string><![CDATA[YES]]></activiti:string>
          </activiti:field>
          <activiti:field name="sendPhoneMsg">
            <activiti:string><![CDATA[NO]]></activiti:string>
          </activiti:field>
        </extensionElements>
      </serviceTask>
      <sequenceFlow id="flow41" sourceRef="shangboReport" targetRef="shangboEmail"></sequenceFlow>
      <serviceTask id="shangboEmail" name="发送上播报告到广告主" activiti:delegateExpression="${messageBox}">
        <extensionElements>
          <activiti:field name="actionType">
            <activiti:string><![CDATA[shangbo]]></activiti:string>
          </activiti:field>
          <activiti:field name="sendMail">
            <activiti:string><![CDATA[YES]]></activiti:string>
          </activiti:field>
          <activiti:field name="sendSiteMsg">
            <activiti:string><![CDATA[YES]]></activiti:string>
          </activiti:field>
          <activiti:field name="sendPhoneMsg">
            <activiti:string><![CDATA[NO]]></activiti:string>
          </activiti:field>
        </extensionElements>
      </serviceTask>
      <sequenceFlow id="flow42" sourceRef="jianboReport" targetRef="theEnd"></sequenceFlow>
 
      <subProcess id="approvePaymentSubprocess" name="审核支付流程">
        <exclusiveGateway id="paymentGateway" name="支付情况检查"></exclusiveGateway>
        <sequenceFlow id="flow32" name="支付OK" sourceRef="paymentGateway" targetRef="readyGateway">
          <conditionExpression xsi:type="tFormalExpression"><![CDATA[${paymentResult == true}]]></conditionExpression>
        </sequenceFlow>
        <sequenceFlow id="flow45" name="支付未完成" sourceRef="paymentGateway" targetRef="paymentFailureEmail">
          <conditionExpression xsi:type="tFormalExpression"><![CDATA[${paymentResult == false}]]></conditionExpression>
        </sequenceFlow>
        <exclusiveGateway id="approve2Gateway" name="终审情况"></exclusiveGateway>
        <sequenceFlow id="flow13" name="不通过" sourceRef="approve2Gateway" targetRef="approve1">
          <conditionExpression xsi:type="tFormalExpression"><![CDATA[${approve2Result == false}]]></conditionExpression>
        </sequenceFlow>
        <sequenceFlow id="flow15" name="通过" sourceRef="approve2Gateway" targetRef="approveEmail">
          <conditionExpression xsi:type="tFormalExpression"><![CDATA[${approve2Result == true}]]></conditionExpression>
        </sequenceFlow>
        <userTask id="financialCheck" name="财务确认" activiti:candidateGroups="ShibaFinancialManager"></userTask>
        <sequenceFlow id="flow44" sourceRef="financialCheck" targetRef="paymentGateway"></sequenceFlow>
        <inclusiveGateway id="readyGateway" name="订单支付及物料情况确认"></inclusiveGateway>
        <sequenceFlow id="flow37" name="订单/支付/物料OK" sourceRef="readyGateway" targetRef="generateSchedule">
          <conditionExpression xsi:type="tFormalExpression"><![CDATA[${approve1Result == true && approve2Result == true && paymentResult == true}]]></conditionExpression>
        </sequenceFlow>
        <serviceTask id="denyEmail" name="发送审核不通过的通知给广告主" activiti:delegateExpression="${messageBox}">
          <extensionElements>
            <activiti:field name="actionType">
              <activiti:string><![CDATA[deny]]></activiti:string>
            </activiti:field>
            <activiti:field name="sendMail">
              <activiti:string><![CDATA[YES]]></activiti:string>
            </activiti:field>
            <activiti:field name="sendSiteMsg">
              <activiti:string><![CDATA[YES]]></activiti:string>
            </activiti:field>
            <activiti:field name="sendPhoneMsg">
              <activiti:string><![CDATA[NO]]></activiti:string>
            </activiti:field>
          </extensionElements>
        </serviceTask>
        <sequenceFlow id="flow43" sourceRef="denyEmail" targetRef="modifyOrder"></sequenceFlow>
        <userTask id="modifyOrder" name="修改订单" activiti:candidateUsers="${_owner.username}">
          <documentation>修改订单信息</documentation>
        </userTask>
        <sequenceFlow id="flow57" sourceRef="modifyOrder" targetRef="approve1"></sequenceFlow>
        <exclusiveGateway id="approve1Gateway" name="初审情况"></exclusiveGateway>
        <sequenceFlow id="flow9" name="订单OK，物料未审核" sourceRef="approve1Gateway" targetRef="approve2">
          <conditionExpression xsi:type="tFormalExpression"><![CDATA[${approve1Result == true && approve2Result == false}]]></conditionExpression>
        </sequenceFlow>
        <sequenceFlow id="flow10" name="订单不通过" sourceRef="approve1Gateway" targetRef="denyEmail">
          <conditionExpression xsi:type="tFormalExpression"><![CDATA[${approve1Result == false}]]></conditionExpression>
        </sequenceFlow>
        <sequenceFlow id="flow49" name="订单OK，物料已审核" sourceRef="approve1Gateway" targetRef="readyGateway">
          <conditionExpression xsi:type="tFormalExpression"><![CDATA[${approve1Result == true && approve2Result == true}]]></conditionExpression>
        </sequenceFlow>
        <userTask id="approve1" name="初审" activiti:candidateGroups="ShibaSuppliesManager">
          <documentation>管理员初审物料信息，程序必须设置审核结果的process变量：
			1. approve1Result:true/false
			2. approve1Comments:描述审核结果的文本</documentation>
        </userTask>
        <sequenceFlow id="flow8" sourceRef="approve1" targetRef="approve1Gateway"></sequenceFlow>
        <inclusiveGateway id="orderSubmittedGateway" name="订单物料审核以及支付"></inclusiveGateway>
        <sequenceFlow id="flow30" name="未支付" sourceRef="orderSubmittedGateway" targetRef="payment">
          <conditionExpression xsi:type="tFormalExpression"><![CDATA[${paymentResult == false}]]></conditionExpression>
        </sequenceFlow>
        <userTask id="payment" name="支付" activiti:candidateUsers="${_owner.username}"></userTask>
        <sequenceFlow id="flow31" sourceRef="payment" targetRef="financialCheck"></sequenceFlow>
        <userTask id="approve2" name="终审" activiti:candidateGroups="BeiguangMaterialManager">
          <documentation>管理员审核物料信息并入库，填写物料ID等信息，程序设置审核结果的process变量：
			1.approve2Result：true/false
			2.approve2Comments:描述审核结果的文本</documentation>
        </userTask>
        <sequenceFlow id="flow12" sourceRef="approve2" targetRef="approve2Gateway"></sequenceFlow>
        <serviceTask id="approveEmail" name="发送审核通过通知" activiti:delegateExpression="${messageBox}">
          <extensionElements>
            <activiti:field name="actionType">
              <activiti:string><![CDATA[pass]]></activiti:string>
            </activiti:field>
            <activiti:field name="sendMail">
              <activiti:string><![CDATA[YES]]></activiti:string>
            </activiti:field>
            <activiti:field name="sendSiteMsg">
              <activiti:string><![CDATA[YES]]></activiti:string>
            </activiti:field>
            <activiti:field name="sendPhoneMsg">
              <activiti:string><![CDATA[NO]]></activiti:string>
            </activiti:field>
          </extensionElements>
        </serviceTask>
        <sequenceFlow id="flow16" sourceRef="approveEmail" targetRef="readyGateway"></sequenceFlow>
        <serviceTask id="paymentFailureEmail" name="发送支付失败通知" activiti:delegateExpression="${messageBox}">
          <extensionElements>
            <activiti:field name="actionType">
              <activiti:string><![CDATA[payFail]]></activiti:string>
            </activiti:field>
            <activiti:field name="sendMail">
              <activiti:string><![CDATA[YES]]></activiti:string>
            </activiti:field>
            <activiti:field name="sendSiteMsg">
              <activiti:string><![CDATA[YES]]></activiti:string>
            </activiti:field>
            <activiti:field name="sendPhoneMsg">
              <activiti:string><![CDATA[NO]]></activiti:string>
            </activiti:field>
          </extensionElements>
        </serviceTask>
        <serviceTask id="generateSchedule" name="生成排期表" activiti:delegateExpression="${generateSchedule}"></serviceTask>
        <sequenceFlow id="flow47" name="排期表OK" sourceRef="generateSchedule" targetRef="scheduleGateway"></sequenceFlow>
        <exclusiveGateway id="scheduleGateway" name="排期表情况检查"></exclusiveGateway>
        <endEvent id="endevent3" name="End"></endEvent>
        <sequenceFlow id="flow59" sourceRef="scheduleGateway" targetRef="endevent3">
          <conditionExpression xsi:type="tFormalExpression"><![CDATA[${scheduleResult == true}]]></conditionExpression>
        </sequenceFlow>
        <startEvent id="startevent2" name="Start"></startEvent>
        <sequenceFlow id="flow60" sourceRef="startevent2" targetRef="orderSubmittedGateway"></sequenceFlow>
        <endEvent id="scheduleErrorEvent" name="ErrorEnd">
          <errorEventDefinition errorRef="scheduleError"></errorEventDefinition>
        </endEvent>
        <sequenceFlow id="flow61" name="无法生成排期表" sourceRef="scheduleGateway" targetRef="scheduleErrorEvent">
          <conditionExpression xsi:type="tFormalExpression"><![CDATA[${scheduleResult == false}]]></conditionExpression>
        </sequenceFlow>
        <sequenceFlow id="flow64" sourceRef="paymentFailureEmail" targetRef="payment"></sequenceFlow>
        <userTask id="bindstatic" name="绑定素材" activiti:candidateUsers="${_owner.username}"></userTask>
        <sequenceFlow id="flow65" sourceRef="bindstatic" targetRef="approve1"></sequenceFlow>
        <sequenceFlow id="flow66" sourceRef="orderSubmittedGateway" targetRef="bindstatic"></sequenceFlow>
      </subProcess>
      <sequenceFlow id="flow38" sourceRef="approvePaymentSubprocess" targetRef="submitSchedule"></sequenceFlow>
      <boundaryEvent id="boundaryerror2" name="Error" attachedToRef="approvePaymentSubprocess">
        <errorEventDefinition errorRef="scheduleError"></errorEventDefinition>
      </boundaryEvent>
      <scriptTask id="resetApprove1ScriptTask" name="重置初审状态" scriptFormat="JavaScript" activiti:autoStoreVariables="false">
        <script>
		    execution.setVariable("approve1Result", false);
		    execution.setVariable("approve1Comments", "该订单无法排期");
		</script>
      </scriptTask>
      <sequenceFlow id="flow62" sourceRef="resetApprove1ScriptTask" targetRef="approvePaymentSubprocess"></sequenceFlow>
    </subProcess>
    <boundaryEvent id="boundarytimer1" name="Timer" attachedToRef="mainSubprocess" cancelActivity="false">
      <timerEventDefinition>
        <timeDuration>${_timeout}</timeDuration>
      </timerEventDefinition>
    </boundaryEvent>
    <sequenceFlow id="flow54" sourceRef="boundarytimer1" targetRef="timeoutTask"></sequenceFlow>
    <boundaryEvent id="boundaryerror1" name="Error" attachedToRef="mainSubprocess">
      <errorEventDefinition></errorEventDefinition>
    </boundaryEvent>
    <sequenceFlow id="flow55" sourceRef="boundaryerror1" targetRef="errortask"></sequenceFlow>
    <sequenceFlow id="flow48" name="排期错误" sourceRef="boundaryerror2" targetRef="resetApprove1ScriptTask">
      <conditionExpression xsi:type="tFormalExpression"><![CDATA[${scheduleResult == false}]]></conditionExpression>
    </sequenceFlow>
  </process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_order">
    <bpmndi:BPMNPlane bpmnElement="order" id="BPMNPlane_order">
      <bpmndi:BPMNShape bpmnElement="startevent1" id="BPMNShape_startevent1">
        <omgdc:Bounds height="35.0" width="35.0" x="14.0" y="437.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="errortask" id="BPMNShape_errortask">
        <omgdc:Bounds height="55.0" width="105.0" x="972.0" y="920.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="timeoutTask" id="BPMNShape_timeoutTask">
        <omgdc:Bounds height="55.0" width="105.0" x="732.0" y="920.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="initializeTask" id="BPMNShape_initializeTask">
        <omgdc:Bounds height="55.0" width="105.0" x="90.0" y="427.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="endevent1" id="BPMNShape_endevent1">
        <omgdc:Bounds height="35.0" width="35.0" x="1360.0" y="446.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="mainSubprocess" id="BPMNShape_mainSubprocess">
        <omgdc:Bounds height="774.0" width="1071.0" x="240.0" y="77.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="theStart" id="BPMNShape_theStart">
        <omgdc:Bounds height="35.0" width="35.0" x="282.0" y="270.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="submitOrder" id="BPMNShape_submitOrder">
        <omgdc:Bounds height="60.0" width="100.0" x="250.0" y="350.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="shangboReport" id="BPMNShape_shangboReport">
        <omgdc:Bounds height="55.0" width="105.0" x="810.0" y="670.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="theEnd" id="BPMNShape_theEnd">
        <omgdc:Bounds height="35.0" width="35.0" x="810.0" y="780.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="jianboReport" id="BPMNShape_jianboReport">
        <omgdc:Bounds height="55.0" width="105.0" x="520.0" y="770.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="submitSchedule" id="BPMNShape_submitSchedule">
        <omgdc:Bounds height="55.0" width="105.0" x="378.0" y="670.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="inputSchedule" id="BPMNShape_inputSchedule">
        <omgdc:Bounds height="55.0" width="105.0" x="520.0" y="670.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="effectiveEmail" id="BPMNShape_effectiveEmail">
        <omgdc:Bounds height="55.0" width="105.0" x="660.0" y="670.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="shangboEmail" id="BPMNShape_shangboEmail">
        <omgdc:Bounds height="55.0" width="105.0" x="378.0" y="770.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
     
      <bpmndi:BPMNShape bpmnElement="approvePaymentSubprocess" id="BPMNShape_approvePaymentSubprocess">
        <omgdc:Bounds height="531.0" width="913.0" x="378.0" y="110.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="paymentGateway" id="BPMNShape_paymentGateway">
        <omgdc:Bounds height="40.0" width="40.0" x="858.0" y="482.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="approve2Gateway" id="BPMNShape_approve2Gateway">
        <omgdc:Bounds height="40.0" width="40.0" x="759.0" y="416.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="financialCheck" id="BPMNShape_financialCheck">
        <omgdc:Bounds height="55.0" width="105.0" x="693.0" y="475.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="readyGateway" id="BPMNShape_readyGateway">
        <omgdc:Bounds height="40.0" width="40.0" x="973.0" y="415.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="denyEmail" id="BPMNShape_denyEmail">
        <omgdc:Bounds height="55.0" width="105.0" x="540.0" y="148.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="modifyOrder" id="BPMNShape_modifyOrder">
        <omgdc:Bounds height="55.0" width="105.0" x="540.0" y="231.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="approve1Gateway" id="BPMNShape_approve1Gateway">
        <omgdc:Bounds height="40.0" width="40.0" x="692.0" y="155.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="approve1" id="BPMNShape_approve1">
        <omgdc:Bounds height="60.0" width="100.0" x="543.0" y="321.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="orderSubmittedGateway" id="BPMNShape_orderSubmittedGateway">
        <omgdc:Bounds height="40.0" width="40.0" x="452.0" y="415.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="payment" id="BPMNShape_payment">
        <omgdc:Bounds height="55.0" width="105.0" x="543.0" y="475.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="approve2" id="BPMNShape_approve2">
        <omgdc:Bounds height="60.0" width="100.0" x="730.0" y="321.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="approveEmail" id="BPMNShape_approveEmail">
        <omgdc:Bounds height="55.0" width="105.0" x="843.0" y="408.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="paymentFailureEmail" id="BPMNShape_paymentFailureEmail">
        <omgdc:Bounds height="55.0" width="105.0" x="683.0" y="551.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="generateSchedule" id="BPMNShape_generateSchedule">
        <omgdc:Bounds height="55.0" width="105.0" x="1103.0" y="408.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="scheduleGateway" id="BPMNShape_scheduleGateway">
        <omgdc:Bounds height="40.0" width="40.0" x="1135.0" y="331.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="endevent3" id="BPMNShape_endevent3">
        <omgdc:Bounds height="35.0" width="35.0" x="1240.0" y="333.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="startevent2" id="BPMNShape_startevent2">
        <omgdc:Bounds height="35.0" width="35.0" x="400.0" y="418.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="scheduleErrorEvent" id="BPMNShape_scheduleErrorEvent">
        <omgdc:Bounds height="35.0" width="35.0" x="1240.0" y="245.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="bindstatic" id="BPMNShape_bindstatic">
        <omgdc:Bounds height="55.0" width="105.0" x="420.0" y="324.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="boundaryerror2" id="BPMNShape_boundaryerror2">
        <omgdc:Bounds height="30.0" width="30.0" x="1038.0" y="630.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="resetApprove1ScriptTask" id="BPMNShape_resetApprove1ScriptTask">
        <omgdc:Bounds height="61.0" width="105.0" x="1000.0" y="690.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="boundarytimer1" id="BPMNShape_boundarytimer1">
        <omgdc:Bounds height="30.0" width="30.0" x="770.0" y="840.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="boundaryerror1" id="BPMNShape_boundaryerror1">
        <omgdc:Bounds height="30.0" width="30.0" x="1010.0" y="837.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge bpmnElement="flow20" id="BPMNEdge_flow20">
        <omgdi:waypoint x="195.0" y="454.0"></omgdi:waypoint>
        <omgdi:waypoint x="240.0" y="464.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow26" id="BPMNEdge_flow26">
        <omgdi:waypoint x="49.0" y="454.0"></omgdi:waypoint>
        <omgdi:waypoint x="90.0" y="454.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow50" id="BPMNEdge_flow50">
        <omgdi:waypoint x="1311.0" y="464.0"></omgdi:waypoint>
        <omgdi:waypoint x="1360.0" y="463.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow51" id="BPMNEdge_flow51">
        <omgdi:waypoint x="1077.0" y="947.0"></omgdi:waypoint>
        <omgdi:waypoint x="1377.0" y="947.0"></omgdi:waypoint>
        <omgdi:waypoint x="1377.0" y="481.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow1" id="BPMNEdge_flow1">
        <omgdi:waypoint x="299.0" y="305.0"></omgdi:waypoint>
        <omgdi:waypoint x="300.0" y="350.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow27" id="BPMNEdge_flow27">
        <omgdi:waypoint x="350.0" y="380.0"></omgdi:waypoint>
        <omgdi:waypoint x="378.0" y="375.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow33" id="BPMNEdge_flow33">
        <omgdi:waypoint x="765.0" y="697.0"></omgdi:waypoint>
        <omgdi:waypoint x="810.0" y="697.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow34" id="BPMNEdge_flow34">
        <omgdi:waypoint x="483.0" y="797.0"></omgdi:waypoint>
        <omgdi:waypoint x="520.0" y="797.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      
      <bpmndi:BPMNEdge bpmnElement="flow39" id="BPMNEdge_flow39">
        <omgdi:waypoint x="483.0" y="697.0"></omgdi:waypoint>
        <omgdi:waypoint x="520.0" y="697.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow40" id="BPMNEdge_flow40">
        <omgdi:waypoint x="625.0" y="697.0"></omgdi:waypoint>
        <omgdi:waypoint x="660.0" y="697.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow41" id="BPMNEdge_flow41">
        <omgdi:waypoint x="862.0" y="725.0"></omgdi:waypoint>
        <omgdi:waypoint x="861.0" y="744.0"></omgdi:waypoint>
        <omgdi:waypoint x="431.0" y="744.0"></omgdi:waypoint>
        <omgdi:waypoint x="430.0" y="770.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow42" id="BPMNEdge_flow42">
        <omgdi:waypoint x="625.0" y="797.0"></omgdi:waypoint>
        <omgdi:waypoint x="660.0" y="797.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow32" id="BPMNEdge_flow32">
        <omgdi:waypoint x="898.0" y="502.0"></omgdi:waypoint>
        <omgdi:waypoint x="992.0" y="502.0"></omgdi:waypoint>
        <omgdi:waypoint x="993.0" y="455.0"></omgdi:waypoint>
        <bpmndi:BPMNLabel>
          <omgdc:Bounds height="12.0" width="38.0" x="1276.0" y="588.0"></omgdc:Bounds>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow45" id="BPMNEdge_flow45">
        <omgdi:waypoint x="878.0" y="522.0"></omgdi:waypoint>
        <omgdi:waypoint x="877.0" y="578.0"></omgdi:waypoint>
        <omgdi:waypoint x="788.0" y="578.0"></omgdi:waypoint>
        <bpmndi:BPMNLabel>
          <omgdc:Bounds height="11.0" width="55.0" x="1168.0" y="680.0"></omgdc:Bounds>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow13" id="BPMNEdge_flow13">
        <omgdi:waypoint x="759.0" y="436.0"></omgdi:waypoint>
        <omgdi:waypoint x="593.0" y="435.0"></omgdi:waypoint>
        <omgdi:waypoint x="593.0" y="381.0"></omgdi:waypoint>
        <bpmndi:BPMNLabel>
          <omgdc:Bounds height="11.0" width="33.0" x="1048.0" y="515.0"></omgdc:Bounds>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow15" id="BPMNEdge_flow15">
        <omgdi:waypoint x="799.0" y="436.0"></omgdi:waypoint>
        <omgdi:waypoint x="843.0" y="435.0"></omgdi:waypoint>
        <bpmndi:BPMNLabel>
          <omgdc:Bounds height="11.0" width="22.0" x="1177.0" y="524.0"></omgdc:Bounds>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow44" id="BPMNEdge_flow44">
        <omgdi:waypoint x="798.0" y="502.0"></omgdi:waypoint>
        <omgdi:waypoint x="858.0" y="502.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow37" id="BPMNEdge_flow37">
        <omgdi:waypoint x="1013.0" y="435.0"></omgdi:waypoint>
        <omgdi:waypoint x="1103.0" y="435.0"></omgdi:waypoint>
        <bpmndi:BPMNLabel>
          <omgdc:Bounds height="12.0" width="88.0" x="1378.0" y="514.0"></omgdc:Bounds>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow43" id="BPMNEdge_flow43">
        <omgdi:waypoint x="592.0" y="203.0"></omgdi:waypoint>
        <omgdi:waypoint x="592.0" y="231.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow57" id="BPMNEdge_flow57">
        <omgdi:waypoint x="592.0" y="286.0"></omgdi:waypoint>
        <omgdi:waypoint x="593.0" y="321.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow9" id="BPMNEdge_flow9">
        <omgdi:waypoint x="732.0" y="175.0"></omgdi:waypoint>
        <omgdi:waypoint x="779.0" y="175.0"></omgdi:waypoint>
        <omgdi:waypoint x="780.0" y="321.0"></omgdi:waypoint>
        <bpmndi:BPMNLabel>
          <omgdc:Bounds height="72.0" width="24.0" x="1146.0" y="307.0"></omgdc:Bounds>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow10" id="BPMNEdge_flow10">
        <omgdi:waypoint x="692.0" y="175.0"></omgdi:waypoint>
        <omgdi:waypoint x="645.0" y="175.0"></omgdi:waypoint>
        <bpmndi:BPMNLabel>
          <omgdc:Bounds height="33.0" width="36.0" x="995.0" y="232.0"></omgdc:Bounds>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow49" id="BPMNEdge_flow49">
        <omgdi:waypoint x="712.0" y="155.0"></omgdi:waypoint>
        <omgdi:waypoint x="712.0" y="129.0"></omgdi:waypoint>
        <omgdi:waypoint x="992.0" y="129.0"></omgdi:waypoint>
        <omgdi:waypoint x="993.0" y="415.0"></omgdi:waypoint>
        <bpmndi:BPMNLabel>
          <omgdc:Bounds height="36.0" width="100.0" x="1204.0" y="217.0"></omgdc:Bounds>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow8" id="BPMNEdge_flow8">
        <omgdi:waypoint x="643.0" y="351.0"></omgdi:waypoint>
        <omgdi:waypoint x="711.0" y="350.0"></omgdi:waypoint>
        <omgdi:waypoint x="712.0" y="195.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow30" id="BPMNEdge_flow30">
        <omgdi:waypoint x="472.0" y="455.0"></omgdi:waypoint>
        <omgdi:waypoint x="472.0" y="502.0"></omgdi:waypoint>
        <omgdi:waypoint x="543.0" y="502.0"></omgdi:waypoint>
        <bpmndi:BPMNLabel>
          <omgdc:Bounds height="11.0" width="33.0" x="850.0" y="603.0"></omgdc:Bounds>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow31" id="BPMNEdge_flow31">
        <omgdi:waypoint x="648.0" y="502.0"></omgdi:waypoint>
        <omgdi:waypoint x="693.0" y="502.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow12" id="BPMNEdge_flow12">
        <omgdi:waypoint x="780.0" y="381.0"></omgdi:waypoint>
        <omgdi:waypoint x="779.0" y="416.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow16" id="BPMNEdge_flow16">
        <omgdi:waypoint x="948.0" y="435.0"></omgdi:waypoint>
        <omgdi:waypoint x="973.0" y="435.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow47" id="BPMNEdge_flow47">
        <omgdi:waypoint x="1155.0" y="408.0"></omgdi:waypoint>
        <omgdi:waypoint x="1155.0" y="371.0"></omgdi:waypoint>
        <bpmndi:BPMNLabel>
          <omgdc:Bounds height="12.0" width="49.0" x="1500.0" y="410.0"></omgdc:Bounds>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow59" id="BPMNEdge_flow59">
        <omgdi:waypoint x="1175.0" y="351.0"></omgdi:waypoint>
        <omgdi:waypoint x="1240.0" y="350.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow60" id="BPMNEdge_flow60">
        <omgdi:waypoint x="435.0" y="435.0"></omgdi:waypoint>
        <omgdi:waypoint x="452.0" y="435.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow61" id="BPMNEdge_flow61">
        <omgdi:waypoint x="1155.0" y="331.0"></omgdi:waypoint>
        <omgdi:waypoint x="1155.0" y="262.0"></omgdi:waypoint>
        <omgdi:waypoint x="1240.0" y="262.0"></omgdi:waypoint>
        <bpmndi:BPMNLabel>
          <omgdc:Bounds height="11.0" width="77.0" x="1493.0" y="334.0"></omgdc:Bounds>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow64" id="BPMNEdge_flow64">
        <omgdi:waypoint x="683.0" y="578.0"></omgdi:waypoint>
        <omgdi:waypoint x="595.0" y="578.0"></omgdi:waypoint>
        <omgdi:waypoint x="595.0" y="530.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow65" id="BPMNEdge_flow65">
        <omgdi:waypoint x="525.0" y="351.0"></omgdi:waypoint>
        <omgdi:waypoint x="543.0" y="351.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow66" id="BPMNEdge_flow66">
        <omgdi:waypoint x="472.0" y="415.0"></omgdi:waypoint>
        <omgdi:waypoint x="472.0" y="379.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow38" id="BPMNEdge_flow38">
        <omgdi:waypoint x="834.0" y="641.0"></omgdi:waypoint>
        <omgdi:waypoint x="430.0" y="670.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow62" id="BPMNEdge_flow62">
        <omgdi:waypoint x="1105.0" y="720.0"></omgdi:waypoint>
        <omgdi:waypoint x="1182.0" y="720.0"></omgdi:waypoint>
        <omgdi:waypoint x="834.0" y="641.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow54" id="BPMNEdge_flow54">
        <omgdi:waypoint x="785.0" y="870.0"></omgdi:waypoint>
        <omgdi:waypoint x="784.0" y="920.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow55" id="BPMNEdge_flow55">
        <omgdi:waypoint x="1025.0" y="867.0"></omgdi:waypoint>
        <omgdi:waypoint x="1024.0" y="920.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow48" id="BPMNEdge_flow48">
        <omgdi:waypoint x="1053.0" y="660.0"></omgdi:waypoint>
        <omgdi:waypoint x="1052.0" y="690.0"></omgdi:waypoint>
        <bpmndi:BPMNLabel>
          <omgdc:Bounds height="11.0" width="44.0" x="1063.0" y="660.0"></omgdc:Bounds>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</definitions>